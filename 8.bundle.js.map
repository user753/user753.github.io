{"version":3,"sources":["webpack:///./src/games/ships/meta.ts","webpack:///./src/core/ui/controls/GraphicsImg.ts","webpack:///./src/core/ui/components/games/gameUI/panelComponent.ts","webpack:///./src/core/ui/components/games/baseMainGameComponent.ts","webpack:///./src/core/utils/circleSeq.ts","webpack:///./src/core/ui/components/games/gameUI/tutorialTextComponent.ts","webpack:///./src/core/ui/controls/behaviors/textOnCenterBehavior.ts","webpack:///./src/core/ui/components/games/gameUI/textPanelComponent.ts","webpack:///./src/games/ships/assets.ts","webpack:///./src/core/utils/matrixs.ts","webpack:///./src/games/ships/components/mainComponent.ts","webpack:///./src/games/ships/components/instructionComponent.ts","webpack:///./src/games/ships/components/introComponent.ts","webpack:///./src/games/ships/components/seaComponent.ts","webpack:///./src/core/ui/animations/spriteAnimation.ts","webpack:///./src/games/ships/levels.ts","webpack:///./src/games/ships/logic.ts"],"names":[],"mappings":"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","file":"8.bundle.js","sourcesContent":["import {IGameMetaData} from \"core/logic\"\nimport {LevelOptions, ScoreOptions} from \"core/types\"\nimport {Images, Sounds} from \"./assets\"\nimport {MainComponent} from \"./components/mainComponent\"\nimport {levels, levelsArray} from \"./levels\"\nimport {Logic} from \"./logic\"\n\nexport const gameId = \"ships\"\nconst scoreOptions: ScoreOptions = {\n  scoreAnswer: 100,\n  scoreBonus: 0,\n  scoreBonusPerLevel: 5\n}\n\nconst levelOptions: LevelOptions = {\n  levels,\n  levelsSeqCounts: levelsArray.map((x, i) => ({\n    seqCount: (x.shipCount) * 3,\n    maxLevel: i + 1\n  }))\n}\n\nexport const metaData: IGameMetaData = {\n  gameId,\n  title: \"Word search\",\n  logic: Logic,\n  component: MainComponent,\n  scoreOptions,\n  levelOptions,\n  darkBg: false,\n  images: Images.data,\n  sounds: Sounds.keys,\n  atlasCount: 2,\n  tutorialTaskCount: 3,\n  size: {\n    width: 2048,\n    height: 1280,\n    heightMin: 1152\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/games/ships/meta.ts","import {CoreColorNumbers, CoreColors} from \"core/assets/fonts\"\nimport {Sizes} from \"core/ui/common/sizes\"\nimport {Control} from \"core/ui/controls/control\"\nimport {phaserService} from \"core/ui/services/instances\"\nimport * as Phaser from 'phaser-ce'\n\nexport class GraphicsImg extends Control {\n  img: Phaser.Sprite\n\n  constructor(private draw: (g: Phaser.Graphics) => void) {\n    super()\n    this.img = this.add(phaserService.drawSprite(draw))\n  }\n\n  updateGraphics() {\n    if (this.game) {\n      const graphics = this.game.make.graphics(0, 0)\n      this.draw(graphics)\n      this.img.loadTexture(graphics.generateTexture())\n      graphics.destroy(true)\n    }\n  }\n}\n\n\nexport class BtnDefaultImg extends GraphicsImg {\n\n  constructor(props: {\n    color: number,\n    size?: {width: number, height: number}\n  }) {\n    const size = props.size || Sizes.create({width: 500, height: 100})\n    super(g => {\n      g.beginFill(props.color)\n      g.drawRoundedRect(0, 0, size.width, size.height, size.height/2)\n    })\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/core/ui/controls/GraphicsImg.ts","import {Sizes} from \"core/ui/common/sizes\"\nimport {Size} from \"core/ui/common/types\"\nimport {Component} from \"core/ui/components/component\"\nimport {TextOnCenterBehavior} from \"core/ui/controls/behaviors/textOnCenterBehavior\"\nimport {GraphicsImg} from \"core/ui/controls/GraphicsImg\"\n\nexport type PanelProps = { size: Size, color?: number, alpha?: number }\n\nexport class PanelComponent extends Component<PanelProps> {\n  positions = Sizes.create({\n    radius: 20,\n  })\n\n  private textBehavior: TextOnCenterBehavior\n  private control: GraphicsImg\n\n  // private control: NinePatchComponent\n\n  constructor() {\n    super()\n\n    // this.control = this.add(new NinePatchComponent(CoreImages.panelList))\n    this.control = this.add(new GraphicsImg(g => {\n      if (this.props) {\n        g.beginFill(this.props.color, this.props.alpha || 0.4)\n        g.drawRoundedRect(0, 0, this.props.size.width, this.props.size.height, this.positions.radius)\n        g.endFill()\n      }\n    }))\n  }\n\n  update() {\n  }\n\n  onPropsUpdate(): void {\n\n    this.control.updateGraphics()\n    // this.control.setSize(this.props.size)\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/core/ui/components/games/gameUI/panelComponent.ts","import {CoreSounds} from \"core/assets\"\nimport {AssetUtl} from \"core/assets/assetUtl\"\nimport {Sys} from \"core/logic/sys\"\nimport {audioService} from \"core/services\"\nimport {GameComponentContext} from \"core/types\"\nimport {Signals} from \"core/ui/animations/signals\"\nimport {AnswerControlType} from \"core/ui/components/answers/answerControlType\"\nimport {GameComponent} from \"core/ui/components/games/gameComponent\"\nimport {Img} from \"core/ui/controls\"\nimport {screenSizeService} from \"core/ui/services/instances\"\nimport {Dev} from \"dev\"\nimport {toJS} from \"mobx\"\n\nconst bgLeftKey = \"bg_left\"\n\nconst introInterval = 2000\nconst introDelay = 300\n\nexport const durations = {\n  introAnimationDelay: 100,\n  introInterval,\n  introDelay\n}\n\nexport abstract class BaseMainGameComponent<S = {}> extends GameComponent<{}, S> {\n\n  statusOptions = {\n    offset: 0,\n    waitCompleteBeforeNewTask: false,\n  }\n\n  introOptions = {\n    disableSound: false,\n    runOnNewTaskAfter: false\n  }\n\n  initialState(): S {\n    return {} as any\n  }\n\n  answersControl = AnswerControlType.None\n\n  constructor(context: GameComponentContext) {\n    super(context)\n    context.uiService.rootComponent = this\n    context.gameState = this.initialState()\n\n    this.fixedToCamera = true\n    this.onDestroy.addOnce(() => {\n      this.context.uiService.mainComponent.onNewTask.dispose()\n      this.context.uiService.mainComponent.onAnswer.dispose()\n      audioService.stopAll()\n    })\n\n    this.onChangeForRun(\n      x => screenSizeService.screenSize,\n      x => {\n        this.cameraOffset.y = screenSizeService.topOffset\n      })\n\n  }\n\n  get cameraBottom() {\n    const bottom = screenSizeService.height - this.cameraOffset.y\n    return bottom\n  }\n\n  prepareDefaultIntroAnimation(delay = durations.introDelay) {\n    let bgLeftOffset = 0\n    let bgLeft: Img | undefined = undefined\n    if (!screenSizeService.isPortrait && AssetUtl.checkImageKey(this.gameKey(bgLeftKey))) {\n      bgLeft = this.addImage([bgLeftKey, [0, 0]])\n      const width = -bgLeft.width + 2\n      bgLeft.x = width\n      bgLeftOffset = -width\n    }\n    this.cameraOffset.x = -screenSizeService.realLeftOffset + bgLeftOffset\n    const tween = this.game.add.tween(this.cameraOffset).to(\n      {x: 0}, durations.introInterval, Phaser.Easing.Cubic.InOut, false, delay\n    )\n    if (bgLeft) {\n      tween.onComplete.addOnce(() => this.remove(bgLeft, true))\n    }\n    return tween\n  }\n\n  introAnimation(): { start: () => void, onComplete: Phaser.Signal } {\n    const tween = this.prepareDefaultIntroAnimation()\n    return tween\n  }\n\n  startIntro() {\n    if (Sys.devMode && !Dev.devModeIntro) {\n      this.context.uiService.mainComponent.onIntroComplete.dispatch()\n      return Signals.memorize()\n    }\n    if (!this.introOptions.disableSound) {\n      this.playSound(CoreSounds.intro, false, true)\n    }\n    const tween = this.introAnimation()\n    const signal = Signals.bind(this.delay(durations.introAnimationDelay), () => {\n      tween.start()\n      return tween.onComplete\n    })\n    signal.addOnce(() => this.context.uiService.mainComponent.onIntroComplete.dispatch())\n    this.disableInputOn(signal)\n    return signal\n  }\n\n  onAfterInit() {\n    this.initTaskRendering()\n  }\n\n  private initTaskRendering() {\n\n    this.onChangeFor(() => this.gameState.lastAnswer, x => {\n      this.context.uiService.mainComponent.onAnswer.dispatch(x)\n    })\n    this.onChangeFor(() => this.context.gameService.gameCycleService.state.levelTask.task,\n      x => {\n        if (this.statusOptions.waitCompleteBeforeNewTask) {\n          this.disableInputOn(this.context.uiService.answerStatus.onAnimationComplete).addOnce(() => {\n            this.callRenderNewTask(x)\n          })\n        } else {\n          this.callRenderNewTask(x)\n        }\n      })\n    this.callRenderNewTask(this.context.gameService.gameCycleService.state.levelTask.task)\n  }\n\n  private callRenderNewTask(task: any) {\n    if (this.introOptions.runOnNewTaskAfter && this.isFirstTask) {\n      this.context.uiService.mainComponent.onIntroComplete.addOnce(() => {\n        this.context.uiService.mainComponent.onNewTask.dispatch(toJS(task))\n      })\n    } else {\n      this.context.uiService.mainComponent.onNewTask.dispatch(toJS(task))\n    }\n  }\n\n  playBackgroundLoop() {\n    this.context.uiService.mainComponent.onIntroComplete.addOnce(() => this.playSound(\"bg\", true))\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/core/ui/components/games/baseMainGameComponent.ts","import {Numbers} from \"core/utils/numbers\"\nimport {RandomGenerator} from \"core/utils/randomGenerator\"\nimport {Undef} from \"core/utils/undef\"\nimport * as _ from \"lodash\"\n\nexport class CircleSeq {\n  index = 0\n\n  constructor(private array: number[]) {}\n\n  next() {\n    const index = this.index\n    this.index = (this.index + 1) % this.array.length\n    return this.array[index]\n  }\n\n  nextArray(count: number) {\n    return _.range(count).map(() => this.next())\n  }\n}\n\nexport class UniqSeq {\n  private index = 0\n  private list: number[] = []\n\n  constructor(public max: number, private rng = new RandomGenerator()) {\n    this.reset()\n  }\n\n  checkMax(newMax: number) {\n    if (newMax != this.max) {\n      this.max = newMax\n      this.reset()\n    }\n    return this\n  }\n\n  reset() {\n    let newList = this.rng.uniqArray(this.max, this.max)\n    if (this.list.length > 0) {\n      const last = _.drop(this.list, Math.floor(this.list.length * 0.6))\n      const first = _.difference(newList, last)\n      newList = first.concat(this.rng.shuffle(last))\n    }\n    this.list = newList\n  }\n\n  private updateIndex() {\n    this.index += 1\n    if (this.index >= this.list.length) {\n      this.reset()\n      this.index = 0\n    }\n  }\n\n  nextArray(count: number) {\n    return _.range(count).map(() => this.next())\n  }\n\n  next(max?: number) {\n    if(max){\n      this.checkMax(max)\n    }\n    const v = this.list[this.index]\n    this.updateIndex()\n    return v\n  }\n\n  nextSkip(v: number): number {\n    const n = this.next()\n    if (this.list.length > 1 && n == v) {\n      return this.nextSkip(v)\n    }\n    return n\n  }\n\n  nextFrom<T>(arr: T[], skip?: T) {\n    this.checkMax(arr.length)\n    return arr[Undef.is(skip) ? this.next() : this.nextSkip(arr.indexOf(skip))]\n  }\n\n  nextSubsetFrom<T>(arr: T[], count: number) {\n    return _.range(count).map(() => this.nextFrom(arr))\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/core/utils/circleSeq.ts","import {CoreFonts} from \"core/assets/index\"\nimport {CoreImages} from \"core/assets/images\"\nimport {CommonAnimations} from \"core/ui/animations/commonAnimations\"\nimport {Sizes} from \"core/ui/common/sizes\"\nimport {TextAlign} from \"core/ui/common/types\"\nimport {GameComponent} from \"core/ui/components/games/gameComponent\"\nimport {PanelComponent} from \"core/ui/components/games/gameUI/panelComponent\"\nimport {Txt} from \"core/ui/controls/index\"\nimport {Btn, IconBtn} from \"core/ui/controls/btn\"\nimport {screenSizeService} from \"core/ui/services/instances\"\nimport {Undef} from \"core/utils/undef\"\n\nexport type TutorialTextProps = {\n  marginTop?: number\n  minHeight?: number,\n  stepCount?: number,\n  textAlign?: TextAlign,\n  panel?: { size?: { width?: number, height?: number }, color?: number, alpha?: number }\n}\n\nexport class TutorialTextComponent extends GameComponent<string> { //TODO rename tutrialComponent\n  positions = Sizes.create({\n    marginTop: 40,\n    textMarginX: 40,\n    padding: 80,\n    buttonMargin: 10,\n    btnWidth: 200,\n    btn: {x: 250, y: 90}\n  })\n\n  positionsPortrait = Sizes.update(this.positions, {\n    marginTop: 20,\n    textMarginX: 40,\n    padding: 40,\n  })\n\n  getPositions = () => screenSizeService.isPortrait ? this.positionsPortrait : this.positions\n\n  private text: Txt\n  private back: PanelComponent\n  private nextBtn: Btn\n  marginTop = 0\n  minHeight?: number\n  stepCount?: number\n  panel: { size?: { width?: number, height?: number }, color?: number, alpha?: number }\n\n  make(props: TutorialTextProps = {}) {\n    this.marginTop = props.marginTop || this.getPositions().marginTop\n    this.minHeight = props.minHeight\n    this.panel = props.panel || {}\n    this.back = this.add(new PanelComponent()).anchorCenterX()\n    this.text = this.add(new Txt(\"\", {...CoreFonts.tutorial(false), align: props.textAlign || \"left\"})).anchorCenter()\n    const stepCount = props.stepCount || 1\n    if (stepCount > 1) {\n      this.tutorialStore.setStepCount(stepCount)\n      this.nextBtn = this.back.add(new IconBtn(\"далее\", CoreImages.next, () => {\n        this.tutorialStore.nextTutorialState()\n      }, this.positions.buttonMargin))\n      CommonAnimations.highlight(this.nextBtn)\n      this.onChangeForRun(() => this.tutorialStore.isLastStep, isLastStep => {\n        this.nextBtn.visible = !isLastStep\n      })\n    }\n    this.onChangeForRun(() => screenSizeService.screenSize, ({width, height}) => {\n      // const btnWidth = this.nextBtn ? this.positions.btnWidth : 0\n      const btnWidth = 0\n      this.text.textControl.wordWrapWidth = screenSizeService.realWidth - this.getPositions().textMarginX * 2 - btnWidth\n      this.updateSize()\n    })\n    return this\n\n  }\n\n  updateSize() {\n    const textHeight = this.text.height + this.getPositions().padding\n    const height = this.minHeight ? Math.max(this.minHeight, textHeight) : textHeight\n\n    this.back.updatePos(Sizes.w2, this.marginTop - screenSizeService.topOffset)\n    const width = Undef.map(this.panel.size, x => x.width) || screenSizeService.realWidth - this.getPositions().padding\n    this.back.setProps({...this.panel, size: {width, height}})\n\n    this.text.updatePos(Sizes.w2, this.back.height / 2 + this.back.y)\n    this.text.updatePivot()\n    this.back.visible = !!this.text.text\n    if (this.nextBtn) {\n      this.nextBtn.updatePos(this.back.width - this.positions.btn.x, this.back.height - this.positions.btn.y)\n    }\n    this.back.updatePivot()\n  }\n\n  onPropsUpdate(): void {\n    this.text.text = this.props\n    this.updateSize()\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/core/ui/components/games/gameUI/tutorialTextComponent.ts","import {TextStyle} from \"core/assets/fonts\"\nimport {Sizes} from \"core/ui/common/sizes\"\nimport {OnInit} from \"core/ui/components/onInit\"\nimport {Behavior} from \"core/ui/controls/behaviors/behavior\"\nimport {Control} from \"core/ui/controls/control\"\nimport {ControlUtl} from \"core/ui/controls/controlUtl\"\nimport {Txt} from \"core/ui/controls/txt\"\n\nexport class TextOnCenterBehavior extends Behavior<Control> implements OnInit {\n\n  positions = Sizes.create({\n    margin: 30,\n  })\n\n  text: Txt\n  maxWidth = 0\n\n  constructor(private font: TextStyle, private margin?: number) {\n    super()\n    this.margin = this.margin || this.positions.margin\n  }\n\n  onInit() {\n    this.text = ControlUtl.addOnCenter(this.control, new Txt(\"    \", this.font))\n    this.text.textControl.wordWrap = true\n  }\n\n  refreshSize() {\n    this.text.visible = false\n    this.maxWidth = this.control.width - 2 * this.margin!\n    this.text.textControl.wordWrapWidth = this.maxWidth * 1.5\n    this.text.setPos(this.control.center())\n    this.text.visible = true\n    ControlUtl.scaleToFit(this.text, this.maxWidth)\n    this.text.updatePivot()\n\n  }\n\n  setText(txt: string) {\n    this.text.text = txt\n    this.refreshSize()\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/core/ui/controls/behaviors/textOnCenterBehavior.ts","import {CoreFonts} from \"core/assets/index\"\nimport {TextStyle} from \"core/assets/fonts\"\nimport {Sizes} from \"core/ui/common/sizes\"\nimport {Size} from \"core/ui/common/types\"\nimport {Component} from \"core/ui/components/component\"\nimport {PanelComponent, PanelProps} from \"core/ui/components/games/gameUI/panelComponent\"\nimport {TextOnCenterBehavior} from \"core/ui/controls/behaviors/textOnCenterBehavior\"\n\nexport class TextPanelComponent extends Component<string> {\n  positions = () => Sizes.create({\n    marginTop: 30,\n    textMarginX: 40,\n    padding: 60\n  })\n  private textBehavior: TextOnCenterBehavior\n  background: PanelComponent\n\n  constructor(props: { size: Size, color?: number, font?: TextStyle }) {\n    super()\n\n    this.background = this.add(new PanelComponent())\n\n    this.background.setProps(props)\n    this.textBehavior = new TextOnCenterBehavior({...(props.font || CoreFonts.tutorial(false)), wordWrap: false})\n    this.background.addBehavior(this.textBehavior)\n  }\n\n  changePanel(props: PanelProps) {\n    this.background.setProps(props)\n    this.textBehavior.refreshSize()\n    this.updatePivot()\n  }\n\n  onPropsUpdate(): void {\n    this.textBehavior.setText(this.props)\n\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/core/ui/components/games/gameUI/textPanelComponent.ts","import {CoreColors, CoreFonts} from \"core/assets/fonts\"\nimport {ImagesMetaData} from \"core/types\"\nimport * as _ from 'lodash'\n\nexport module Translations {\n  export const memorize = \"memorize\"\n  export const remember = \"remember\"\n  export const tutor1 = \"tutor1\"\n  export const tutor2 = \"tutor2\"\n}\n\nexport module Sounds {\n\n  export const bg = \"bg\"\n  export const gull = \"gull\"\n  export const wave = \"wave\"\n\n  export const keys: string[] = [\n    bg,\n    gull,\n    wave\n  ]\n}\n\nexport module Fonts {\n\n  export const instruction = {\n    fontSize: 100, font: CoreFonts.Arial, fill: CoreColors.white, align: \"center\"\n  }\n}\n\nexport module Images {\n  export const landCount = 4\n  export const bg = \"bg\"\n  export const arrow = \"arrow\"\n  export const intro = \"intro\"\n  export const intro_ship = \"intro_ship\"\n  export const sand = \"sand\"\n  export const circle = \"circle\"\n  export const line = \"line\"\n  export const landTypeList = [\"mount\", \"tree\"]\n  export const seaItems = [\"ships_tree\", \"ships_mount\"]\n  export const line_gradient = \"line_gradient\"\n  export const land = (index: number, left: number, right: number) => `land_${index}_${left}_${right}`\n  export const landItem = (type: \"mount\" | \"stone\" | \"tree\", index: number) => `land_${type}_${index}`\n  export const landItemList = _.range(3).map(i => landItem(\"stone\", i)).concat(\n    _.range(3).map(i => landItem(\"tree\", i)))\n  export const coal = (index: number, left: number, right: number) => `coal_${index}_${left}_${right}`\n  export const join = (index: number, left: number, right: number) => `join_${index}_${left}_${right}`\n  export const boat = (index: number) => `boat_${index}`\n  export const flow = (index: number) => `flow_${index}`\n  export const flowList = _.reverse(_.range(4).map(flow))\n  export type CoastlineType = \"coal\" | \"land\" | \"join\"\n  export const Coastline: Record<CoastlineType,\n    (index: number, left: number, right: number) => string> = {\n    coal, land, join\n  }\n  export const data: ImagesMetaData = {\n    sprites: []\n  }\n\n}\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/games/ships/assets.ts","import {Arrays} from \"core/utils/arrays\"\nimport {tuple} from \"core/utils/tuples\"\nimport {Undef} from \"core/utils/undef\"\nimport * as _ from 'lodash'\n\nexport module Matrixs {\n  export type MatrixDirection = \"up\" | \"down\" | \"left\" | \"right\"\n  export const matrixDirectionList: MatrixDirection[] = [\"up\", \"down\", \"left\", \"right\"]\n\n  export const directions: Record<MatrixDirection, {x: number, y: number}> = {\n    up: {x: 0, y: -1},\n    down: {x: 0, y: 1},\n    left: {x: -1, y: 0},\n    right: {x: 1, y: 0}\n  }\n\n  export const oppositeDirections: Record<MatrixDirection, MatrixDirection> = {\n    up: \"down\",\n    down: \"up\",\n    left: \"right\",\n    right: \"left\"\n  }\n\n\n  export function move(p: [number, number], dirs: MatrixDirection[]){\n    console.log(p, dirs)\n    return dirs.reduce(([x,y],v) => {\n      const {x:dx, y:dy} = directions[v]\n      return tuple(x + dx, y + dy)\n    }, p)\n  }\n\n  export function isInside([x,y]: [number, number], {width, height}: {width: number, height: number}){\n    return x >= 0 && y >= 0 && x < width && y < height\n  }\n\n  export function onBoard([x,y]: [number, number], {width, height}: {width: number, height: number}){\n    return x == 0 || y == 0 || x == width - 1 || y == height - 1\n  }\n\n  export function getSize<T>(m: T[][]){\n    return {width: m.length == 0 ? 0 : m[0].length, height: m.length}\n  }\n\n  export function directionIsAvailable(dir: MatrixDirection, p: [number, number],\n    size: {width: number, height: number},\n    obstacles: [number, number][]) {\n    const newP = move(p, [dir])\n    return isInside(newP, size) && !Arrays.includesWith(obstacles, newP)\n  }\n\n  export function getAvailableDirections(p: [number, number],\n    size: {width: number, height: number},\n    obstacle: [number, number][]) {\n    return matrixDirectionList.filter(dir => directionIsAvailable(dir, p, size, obstacle))\n  }\n\n  export function get<T>(m: T[][], [x, y]: [number, number], def?: T) {\n    const row = m[y]\n    return row ? row[x] : def\n  }\n\n  export function set<T>(m: T[][], [x, y]: [number, number], value: T) {\n    let row = m[y]\n    if (Undef.is(row)) {\n      row = []\n      m[y] = row\n    }\n    row[x] = value\n  }\n\n  export function compact<T>(m: T[][]) {\n    return m.map(_.compact)\n  }\n\n  export function create<T>(colCount: number, rowCount: number, fn: (x: number, y: number) => T): T[][] {\n    return _.range(rowCount).map(y => _.range(colCount).map(x => fn(x, y)))\n  }\n\n  export function map<T, K>(m: T[][], fn: (item: T, x: number, y: number) => K): K[][] {\n    return m.map((row, y) => row.map((item, x) => fn(item, x, y)))\n  }\n\n  export function intersection<F, S>(f: F[][], s: S[][]) {\n    const first: [F, [number, number]][] = []\n    const second: [S, [number, number]][] = []\n    const both: [F, S, [number, number]][] = []\n    _.range(Math.max(f.length, s.length)).forEach(y => {\n      _.range(Math.max((f[y] || []).length, (s[y] || []).length)).forEach(x => {\n        const p = tuple(x, y)\n        const fe = get(f, p)\n        const se = get(s, p)\n        if (!Undef.is(fe) && !Undef.is(se)) {\n          both.push([fe, se, p])\n        } else if (!Undef.is(fe)) {\n          first.push([fe, p])\n        } else if (!Undef.is(se)) {\n          second.push([se, p])\n        }\n      })\n    })\n    return tuple(first, second, both)\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/core/utils/matrixs.ts","import {CoreColorNumbers} from \"core/assets/fonts\"\nimport {AnswerStatus, ILastAnswer} from \"core/types/logic\"\nimport {CommonAnimations} from \"core/ui/animations/commonAnimations\"\nimport {Tweens} from \"core/ui/animations/tweens\"\nimport {BiValue} from \"core/ui/common/positions\"\nimport {Sizes} from \"core/ui/common/sizes\"\nimport {BaseMainGameComponent} from \"core/ui/components/games/baseMainGameComponent\"\nimport {TextPanelComponent} from \"core/ui/components/games/gameUI/textPanelComponent\"\nimport {TutorialTextComponent} from \"core/ui/components/games/gameUI/tutorialTextComponent\"\nimport {OnInit} from \"core/ui/components/onInit\"\nimport {Btn} from \"core/ui/controls/btn\"\nimport {Control} from \"core/ui/controls/control\"\nimport {BtnDefaultImg} from \"core/ui/controls/GraphicsImg\"\nimport {Images, Sounds, Translations} from \"games/ships/assets\"\nimport {InstructionComponent} from \"games/ships/components/instructionComponent\"\nimport {IntroComponent} from \"games/ships/components/introComponent\"\nimport {SeaComponent} from \"games/ships/components/seaComponent\"\nimport {Task} from \"games/ships/logic\"\nimport {positions} from \"games/shop/components/roomDarkComponent\"\n\nconst durations = {\n  sea: 300,\n  gull: 10000,\n  delay: 100\n}\n\nconst biValues = BiValue.create({\n  scale: 1,\n}, {\n  scale: 0.75,\n})\n\nexport class MainComponent extends BaseMainGameComponent implements OnInit {\n  bg = this.addImage(Images.bg)\n  seaGroup = this.add(new Control())\n  sea: SeaComponent\n\n  positions = Sizes.create({\n    tutorial: {y: 840},\n    taskDescSize: {width: 800, height: 120},\n    btnSize: {width: 500, height: 100},\n    tutorialBtnShift: 80,\n  })\n\n  biPositions = Sizes.bi({\n    remember: {x: Sizes.widthNormal / 2, y: 1130},\n    taskDesc: {x: Sizes.widthNormal / 2, y: 130},\n    tutorialTaskDesc: {x: Sizes.widthNormal / 2, y: 900},\n    shift: {x: 105, y: 105},\n    seaOffset: {y: 0}\n  }, {\n    remember: {x: Sizes.widthNormal / 2, y: 1210},\n    taskDesc: {x: Sizes.widthNormal / 2, y: 60},\n    tutorialTaskDesc: {x: Sizes.widthNormal / 2, y: 1100},\n    shift: {x: 130, y: 105},\n    seaOffset: {y: 0}\n  })\n\n  instruction = this.add(this.createComponent(InstructionComponent))\n    .anchorCenterX().setBiPos(this.isTutorial ? this.biPositions.tutorialTaskDesc : this.biPositions.taskDesc).fluentUpdate(x => x.visible = false)\n\n  taskDesc = this.add(new TextPanelComponent({\n      size: this.positions.taskDescSize\n    })\n  ).anchorCenterX().setBiPos(this.biPositions.taskDesc).fluentUpdate(x => {\n    x.setProps(this.translate(this.isTutorial ? Translations.tutor1 : Translations.memorize))\n    x.visible = false\n  })\n\n  rememberBtn = this.add(new Btn(this.translate(Translations.remember), () => this.setInstructionVisible(true, false), undefined, new BtnDefaultImg({\n    color: CoreColorNumbers.purple,\n    size: this.positions.btnSize\n  }))).anchorCenter()\n    .fluentUpdate(x => x.visible = false)\n    .setBiPos(this.biPositions.remember)\n\n  private tutorial: TutorialTextComponent\n\n  setInstructionVisible(visible: boolean, begin: boolean) {\n    this.sea.setShipsVisible(!visible, begin).addOnce(() => {\n      CommonAnimations.setVisible(this.taskDesc, !this.isTutorial && !visible, {instantHide: true})\n      CommonAnimations.setVisible(this.rememberBtn, !visible, {instantHide: true})\n    })\n    this.instruction.visible = visible\n    if (this.tutorial) {\n      this.tutorial.setProps(this.translate(visible ? Translations.tutor2 : Translations.tutor1))\n    }\n    this.sea.setButtonsEnabled(visible)\n  }\n\n  onAnswer(answer: ILastAnswer): void {\n    if (answer.status == AnswerStatus.Error) {\n      this.setInstructionVisible(false, false)\n    }\n  }\n\n  onInit(): void {\n    this.playBackgroundLoop()\n    this.interval(() => this.playSound(Sounds.gull), durations.gull)\n    this.introOptions.runOnNewTaskAfter = true\n    if (this.isTutorial) {\n      this.tutorial = this.add(this.createComponent(TutorialTextComponent).make({}))\n      this.taskDesc.visible = false\n      this.rememberBtn.y -= this.positions.tutorialBtnShift\n    }\n    this.startIntro()\n    this.onBiValueChange(biValues.scale, (c, v) => {\n      this.seaGroup.symmetricScale = v\n      this.updateSeaPosition()\n    })\n  }\n\n  updateSeaPosition(){\n    if(!this.sea){\n      return\n    }\n    const fullSize = this.sea.getFullSize()\n    const scale = this.current(biValues.scale)\n    const shift = this.current(this.biPositions.shift)\n\n    this.sea.updatePos(((Sizes.width - fullSize.width*scale) / 2 + shift.x),\n      ((Sizes.height - fullSize.height*scale) / 2 + shift.y) +\n      this.current(this.biPositions.seaOffset).y)\n\n  }\n\n  animationNewLevel(task: Task) {\n    this.instruction.visible = false\n    const prevSea = this.sea\n    if (prevSea) {\n      prevSea.updatePos(this.sea.x - Sizes.width, this.sea.y)\n    }\n    this.sea = this.seaGroup.add(this.createComponentWithProps(SeaComponent, task))\n    this.updateSeaPosition()\n    if (!this.isFirstTask) {\n      this.seaGroup.updatePos(Sizes.width, 0)\n      Tweens.start({\n        target: this.seaGroup,\n        duration: durations.sea,\n        to: {x: 0},\n        easing: Phaser.Easing.Sinusoidal.InOut,\n        onComplete: () => {\n          this.setInstructionVisible(false, true)\n          prevSea.destroy()\n        }\n      })\n    } else {\n      this.delay(durations.delay).addOnce(() => {\n        this.setInstructionVisible(false, true)\n      })\n      // this.sea.setButtonsVisible(true)\n    }\n\n  }\n\n  introAnimation(): { start: () => void; onComplete: Phaser.Signal } {\n    const intro = this.add(this.createComponent(IntroComponent))\n    const tween = intro.playTween()\n    tween.onComplete.addOnce(() => {\n      return intro.destroy()\n    })\n    return {\n      start: () => {\n        tween.start()\n      },\n      onComplete: tween.onComplete\n    }\n  }\n\n  onNewTask(task: Task) {\n    this.instruction.setProps(task)\n    if (this.isNewLevel || this.isFirstTask) {\n      this.animationNewLevel(task)\n    } else {\n      if (this.instruction.visible) {\n        if (this.isFirstTask || this.isNewLevel) {\n          this.setInstructionVisible(false, true)\n        } else {\n          this.setInstructionVisible(true, false)\n        }\n      }\n    }\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/games/ships/components/mainComponent.ts","import {BiValue} from \"core/ui/common/positions\"\nimport {Sizes} from \"core/ui/common/sizes\"\nimport {GameComponent} from \"core/ui/components/games/gameComponent\"\nimport {PanelComponent} from \"core/ui/components/games/gameUI/panelComponent\"\nimport {Control} from \"core/ui/controls/control\"\nimport {Images} from \"games/ships/assets\"\nimport {Task} from \"games/ships/logic\"\n\nconst up = -90\nconst down = 90\nconst left = 180\nconst right = 0\n\nconst biValues = BiValue.create({\n  arrows: {\n    up,\n    down,\n    right,\n    left,\n  }\n}, {\n  arrows: {\n    \"left\": up,\n    \"right\": down,\n    \"up\": left,\n    \"down\": right,\n  }\n})\n\nconst scale = 0.4\n\nexport class InstructionComponent extends GameComponent<Task> {\n\n  positions = Sizes.create({\n    taskDescSize: {width: 700, height: 160},\n    arrows: {x: 130},\n    text: {x: 420, y: 80},\n    margin: {x: 10}\n  })\n\n  bg = this.add(new PanelComponent()).setProps({size: this.positions.taskDescSize})\n  group = this.add(new Control()).anchorCenter().setPos(this.bg.center())\n\n  onPropsUpdate() {\n    this.onBiValueChange(biValues.arrows, (c, v) => {\n      const task = this.props\n      this.group.removeAll(true)\n\n      this.group.add(this.makeImage(Images.circle)).anchorCenter()\n\n      const ship = this.group.add(this.makeImage(Images.boat(task.shipIndex)))\n        .anchorCenter()\n        .fluentUpdate(x => x.symmetricScale = scale)\n\n      const arrowsGroup = this.group.add(new Control()).setPos(this.positions.arrows)\n      const arrows = task.instruction.map(arrow => {\n        return arrowsGroup.add(this.makeImage(Images.arrow)).anchorCenter()\n          .fluentUpdate(x => x.angle = v[arrow])\n      })\n      Sizes.tableRow(arrows, this.positions.margin)\n      this.group.updatePivot()\n\n    })\n    this.updatePivot()\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/games/ships/components/instructionComponent.ts","import {Tweens} from \"core/ui/animations/tweens\"\nimport {Sizes} from \"core/ui/common/sizes\"\nimport {GameComponent} from \"core/ui/components/index\"\nimport {Images} from \"games/ships/assets\"\n\nconst durations = {\n  ship: 1000\n}\n\nexport class IntroComponent extends GameComponent {\n  positions = Sizes.create({\n    from: {x: -300, y: 270},\n    to: {y: 270},\n  })\n  bg = this.addImage(Images.intro)\n  item = this.addImage(Images.intro_ship).setPos(this.positions.from)\n\n  playTween() {\n    return Tweens.start({\n      target: this.item,\n      to: {x: Sizes.width},\n      duration: durations.ship,\n    })\n  }\n\n}\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/games/ships/components/introComponent.ts","import {CommonAnimations} from \"core/ui/animations/commonAnimations\"\nimport {Signals} from \"core/ui/animations/signals\"\nimport {SpriteAnimation} from \"core/ui/animations/spriteAnimation\"\nimport {Tweens} from \"core/ui/animations/tweens\"\nimport {Sizes} from \"core/ui/common/sizes\"\nimport {GameComponent} from \"core/ui/components/games/gameComponent\"\nimport {OnInit} from \"core/ui/components/onInit\"\nimport {ImageBtn} from \"core/ui/controls/btn\"\nimport {Control} from \"core/ui/controls/control\"\nimport {Img} from \"core/ui/controls/img\"\nimport {Arrays} from \"core/utils/arrays\"\nimport {UniqSeq} from \"core/utils/circleSeq\"\nimport {Matrixs} from \"core/utils/matrixs\"\nimport {Numbers} from \"core/utils/numbers\"\nimport {RandomGenerator} from \"core/utils/randomGenerator\"\nimport {tuple} from \"core/utils/tuples\"\nimport {Images, Sounds} from \"games/ships/assets\"\nimport {Task} from \"games/ships/logic\"\nimport * as _ from 'lodash'\nimport MatrixDirection = Matrixs.MatrixDirection\n\ntype Rotation = \"top\" | \"right\" | \"bottom\" | \"left\"\ntype ImgType = \"sand\" | { coastline: { type: Images.CoastlineType, gradient: boolean, left: number, right: number } }\ntype Rect = { x: number, y: number, width: number, height: number }\n\nfunction isInside(rect: Rect, [x, y]: [number, number]) {\n  return rect.x <= x && x <= rect.x + rect.width && rect.y <= y && y < +rect.y + rect.height\n}\n\nconst durations = {\n  flow: 300,\n  shipDelay: 100,\n  ship: 1000\n}\nconst angles: Record<Rotation, number> = {\n  top: 0,\n  right: 90,\n  bottom: 180,\n  left: 270\n}\n\nconst flowAngles: {[key in MatrixDirection]: number} = {\n  up: 270,\n  down: 90,\n  left: 180,\n  right: 0\n}\n\nconst maxHeight = 10\n\nexport class SeaComponent extends GameComponent<Task> implements OnInit {\n  positions = Sizes.create({\n    answerMargin: -50,\n    icon: [211, 170],\n    size: 216\n  })\n  private ships: Img[] = []\n\n  getFullSize() {\n    const units = this.unitSize\n    return {\n      width: units.width * this.positions.size,\n      height: units.height * this.positions.size\n    }\n  }\n\n  landGroup = this.add(new Control())\n  seaGroup = this.add(new Control())\n  buttonsGroup = this.seaGroup.add(new Control())\n  shipGroup = this.seaGroup.add(new Control())\n  private buttons: ImageBtn[] = []\n  state = {\n    buttonEnabled: false\n  }\n\n  createImageKeyFromType(type: ImgType) {\n    if (type == \"sand\") {\n      return Images.sand\n    } else {\n      const fn = Images.Coastline[type.coastline.type]\n      const count = type.coastline.type == \"join\" ? 2 : Images.landCount\n      return fn(this.rng.int(count), type.coastline.left, type.coastline.right)\n    }\n\n  }\n\n  rng = new RandomGenerator()\n\n  itemUniqSeq = new UniqSeq(Images.landItemList.length)\n\n  createLand(task: Task) {\n\n    this.landGroup.cacheAsBitmap = false\n    const [inner, data] = this.generate(task)\n    const land = _.flatten(Matrixs.map(data, (item, x, y) => {\n      if (item.type) {\n        const addTile = (imgKey: string, rotate = true) => {\n          const tile = this.makeImage(imgKey)\n          tile.anchorCenter()\n          if (rotate) {\n            tile.angle = item.angle\n          }\n          tile.updatePos(x * this.positions.size, y * this.positions.size)\n          return tile\n        }\n        const tiles: [Img, boolean][] = []\n        tiles.push(tuple(addTile(this.createImageKeyFromType(item.type)), true))\n        if (item.type != \"sand\") {\n          // if (item.type.coastline.type == \"land\" && item.type.coastline.gradient\n          //   || item.type.coastline.type == \"join\") {\n          //   tiles.push(tuple(addTile(Images.line_gradient), false))\n          // }\n        } else {\n          if (!Matrixs.onBoard([x, y], Matrixs.getSize(data))) {\n            const tile = addTile(this.itemUniqSeq.nextFrom(Images.landItemList), false)\n            const signX = Numbers.sign(Numbers.odd(y))\n            const signY = Numbers.sign(Numbers.odd(x))\n            tile.updatePos(\n              tile.x + this.rng.float() * signX * this.positions.size * 0.2,\n              tile.y + this.rng.float() * signY * this.positions.size * 0.2)\n            tiles.push(tuple(tile, true))\n          }\n        }\n        return tiles\n      }\n      return []\n    }))\n\n    this.landGroup.removeAll(true)\n    this.landGroup.addChildren(_.sortBy(_.flatten(land), x => !x[1]).map(x => x[0]))\n    this.landGroup.cacheAsBitmap = true\n    return inner\n  }\n\n  onPropsUpdate(): void {\n    this.generateContent()\n    this.setButtonsVisible(false)\n  }\n\n  generateContent(){\n    this.landGroup.removeAll(true)\n    this.buttonsGroup.removeAll(true)\n    this.shipGroup.removeAll(true)\n    const task = this.props\n    if(!task){\n      return\n    }\n    const inner = this.createLand(task)\n    this.seaGroup.updatePos(inner.x * this.positions.size, inner.y * this.positions.size)\n    this.createAnswerButtons(task)\n  }\n\n  getWH(task: Task) {\n    return this.isPortrait\n      ? tuple(task.sea.height, task.sea.width)\n      : tuple(task.sea.width, task.sea.height)\n  }\n\n  private createAnswerButtons(task: Task) {\n    const [width, height] = this.getWH(task)\n    const tiles = _.flatten(Matrixs.create(width, height, (x0, y0) => {\n      const p = tuple(x0, y0)\n      const swapP = this.swapXY(p)\n      const isBlock = Arrays.includesWith(task.sea.blocks, swapP)\n\n      const flow = task.sea.flows.find(x => _.isEqual(x[0], swapP))\n      const imgKey = isBlock\n        ? Images.seaItems[0]\n        : flow\n          ? Images.flow(0)\n          : Images.line\n      const isButton = !flow && !isBlock\n      const setPosition = (c: Control) => {\n        c.anchorCenter()\n        c.updatePos(p[0] * this.positions.size, p[1] * this.positions.size)\n      }\n      if (isButton) {\n        const btn = this.addAnswerBehavior(new ImageBtn(\"\",\n          this.gameKey(imgKey), () => {\n          }), swapP, {dark: true, margin: this.positions.answerMargin})\n        btn.button.input.enabled = false\n        setPosition(btn)\n        return btn\n      } else {\n        const img = this.addImage(imgKey).anchorCenter()\n        if (flow) {\n          SpriteAnimation.play(img, Images.flowList.map(x => this.gameKey(x)),\n            durations.flow, true)\n          img.angle = flowAngles[flow[1]] + (this.isPortrait ? 90 : 0)\n        }\n        setPosition(img)\n        return img\n      }\n\n    }))\n    this.buttons = tiles.filter((x): x is ImageBtn => x instanceof ImageBtn)\n    this.buttonsGroup.removeAll(true)\n    this.buttonsGroup.addChildren(tiles)\n\n  }\n\n  setButtonsEnabled(enabled: boolean) {\n    this.state.buttonEnabled = enabled\n    this.updateButtons()\n  }\n\n  updateButtons(){\n    this.buttons.forEach(x => x.button.input.enabled = this.state.buttonEnabled)\n    if (this.state.buttonEnabled) {\n      this.answersAreReady()\n    }\n  }\n\n  generateCoastline(rect: Rect) {\n    const randomEdge = () => this.rng.count(2, 1)\n    const start = [1, 1]\n    const points = this.rectCoastlinePoints(rect).concat(this.rectCoastlinePointsBottom(rect))\n    const tiles = _.range(points.length - 1).reduce((a, i) => {\n      const [[prevLeft, _]] = a\n      const right = i == points.length - 2 ? start[1] : randomEdge()\n      return [[right, prevLeft], ...a]\n    }, [start])\n    return Arrays.zip(points, tiles).map(([p, t]) => {\n      return {\n        pos: p.pos, angle: angles[p.rot],\n        type: {coastline: {type: p.type, left: t[0], right: t[1], gradient: p.gradient}}\n      }\n    })\n  }\n\n  createPoint(pos: [number, number], rot: Rotation, type: Images.CoastlineType, gradient = true) {\n    return {pos, rot, type, gradient}\n  }\n\n  swapXY([x, y]: [number, number]) {\n    return this.isPortrait ? [y, x] : [x, y]\n  }\n\n  animationShips() {\n    const task = this.getCurrentTask<Task>()\n    const [width, height] = this.getWH(task)\n    const [x, y] =\n      [-this.positions.size / 2, (Numbers.count(height, 2) - 0.5) * this.positions.size]\n    // [this.positions.size*(width/2 - 0.5), (Numbers.count(height, 2) - 0.5) * this.positions.size]\n    this.playSound(Sounds.wave)\n    const signals = this.ships.map((ship, i) => {\n      const {x: x2, y: y2} = ship\n      ship.updatePos(-this.seaGroup.x, y)\n      // ship.updatePos(x, y)\n      return Tweens.start({\n        target: ship,\n        delay: i * durations.shipDelay,\n        duration: durations.ship,\n        interpolation: Phaser.Math.catmullRomInterpolation,\n        easing: Phaser.Easing.Quadratic.Out,\n        to: {x: [x, x2], y: [y, y2]},\n        onComplete: () => {\n          ship.updatePos(x2, y2)\n        }\n      }).onComplete\n    })\n    const complete = Signals.waitAll(signals)\n    this.disableInputOn(complete).addOnce(() => {\n      this.stopSound(Sounds.wave)\n      this.buttonsGroup.visible = true\n      CommonAnimations.show(this.buttonsGroup, true)\n    })\n    return complete\n  }\n\n  createShips() {\n    const task = this.getCurrentTask<Task>()\n    if(!task){\n      return Signals.memorize()\n    }\n    const isFirst = this.ships.length == 0\n    this.shipGroup.removeAll(true)\n    this.ships = (task.positions.begin).map((p, i) => {\n      const [x, y] = this.swapXY(p)\n      return this.addImage(Images.boat(i)).updatePos(\n        x * this.positions.size,\n        y * this.positions.size\n      ).anchorCenter()\n    })\n    this.shipGroup.addChildren(this.ships)\n    if (isFirst) {\n      return this.animationShips()\n    }else{\n      return Signals.memorize()\n    }\n  }\n\n  setButtonsVisible(visible: boolean) {\n    this.buttonsGroup.visible = visible\n  }\n\n  setShipsVisible(visible: boolean, begin: boolean) {\n    this.shipGroup.visible = visible\n    return this.createShips()\n  }\n\n  rangePoint(v1: number, v2: number) {\n    if (v1 > v2) {\n      return _.range(v2, v1 + 1).reverse()\n    }\n    return _.range(v1, v2 + 1)\n  }\n\n  rectCoastlinePoints(rect: { x: number, y: number, width: number, height: number }) {\n    const h2 = this.unitSize.height / 2\n\n    const leftLine = this.rangePoint(0, rect.x)\n      .map((x, i) => this.createPoint([x, h2 - 1], \"top\", x == rect.x ? \"join\" : \"land\", false))\n    const rightLine = this.rangePoint(rect.x + rect.width, this.unitSize.width - 1)\n      .map((x, i) => this.createPoint([x, h2 - 1], \"top\", \"land\", false))\n\n    const line = _.range(rect.x + 1, rect.x + rect.width)\n      .map((x, i) => this.createPoint([x, rect.y], \"top\", i == rect.width - 2 ? \"coal\" : \"land\"))\n    const left = _.range(rect.y + 1, h2)\n      .map((y, i) => this.createPoint([rect.x, y - 1], \"left\", i == 0 ? \"coal\" : \"land\"))\n    const right = _.range(rect.y + 1, h2)\n      .map((y, i) => this.createPoint([rect.x + rect.width - 1, y], \"right\", y == h2 - 1 ? \"join\" : \"land\"))\n    return leftLine.concat(left.reverse(), line, right, rightLine)\n  }\n\n  rectCoastlinePointsBottom(rect: { x: number, y: number, width: number, height: number }) {\n    const h2 = this.unitSize.height / 2\n\n    const rightLine = this.rangePoint(this.unitSize.width - 1, rect.x + rect.width - 1)\n      .map((x, i) => this.createPoint([x, h2], \"bottom\", x == rect.x + rect.width - 1 ? \"join\" : \"land\", false))\n    const leftLine = this.rangePoint(rect.x - 1, 0)\n      .map((x, i) => this.createPoint([x, h2], \"bottom\", \"land\", false))\n\n    const line = _.range(rect.x, rect.x + rect.width - 1)\n      .map((x, i) => this.createPoint([x, rect.y + rect.height - 1], \"bottom\", x == rect.x ? \"coal\" : \"land\"))\n    const left = _.range(h2 + 1, rect.y + rect.height)\n      .map((y, i) => this.createPoint([rect.x, y - 1], \"left\", i == 0 ? \"join\" : \"land\"))\n    const right = _.range(h2 + 1, rect.y + rect.height)\n      .map((y, i) => this.createPoint([rect.x + rect.width - 1, y], \"right\", y == rect.y + rect.height - 1 ? \"coal\" : \"land\"))\n    return rightLine.concat(right, line.reverse(), left.reverse(), leftLine)//left.reverse(), line, right, leftLine)\n  }\n\n  // rectCoastlinePoints(rect: {x: number, y: number, width: number, height: number}){\n  //   const top = _.range(rect.x + 1, rect.x + rect.width)\n  //     .map((x, i) => this.createPoint([x, rect.y], \"top\", i == rect.width - 2))\n  //   const bottom = _.range(rect.x + 1, rect.x + rect.width)\n  //     .map((x,i) => this.createPoint([x - 1, rect.y + rect.height - 1], \"bottom\", i == 0))\n  //   const left = _.range(rect.y + 1, rect.y + rect.height)\n  //     .map((y,i) => this.createPoint([rect.x, y - 1], \"left\", i == 0))\n  //   const right = _.range(rect.y + 1, rect.y + rect.height)\n  //     .map((y,i) => this.createPoint([rect.x + rect.width - 1, y], \"right\", i == rect.height - 2))\n  //   return top.concat(right, bottom.reverse(), left.reverse())\n  // }\n\n  getSectionIndex(\n    full: { w: number, h: number },\n    inner: { w: number, h: number },\n    p: { x: number, y: number }) {\n    function getIndex(full: number, inner: number, x: number) {\n      const start = (full - inner) / 2\n      const end = (full + inner) / 2\n      return x < start ? 0 : (x >= end ? 2 : 1)\n    }\n\n    return getIndex(full.h, inner.h, p.y) * 3 + getIndex(full.w, inner.w, p.x)\n  }\n\n  unitSize = {\n    width: 0,\n    height: 0\n  }\n\n  generate(task: Task) {\n    // const maxWidth = Math.ceil(Sizes.width/this.positions.size) + 1\n    const maxWidth = Math.ceil(Sizes.width / this.positions.size) + 1\n    // const maxHeight = Math.ceil(Sizes.height/this.positions.size) + 1\n    const [width, height] = this.getWH(task)\n    const x = Math.ceil((maxWidth - width) / 2)\n    const y = Math.ceil((maxHeight - height) / 2)\n\n    const full = {w: width + x * 2, h: maxHeight}\n\n    this.unitSize = {\n      width: full.w,\n      height: maxHeight\n    }\n\n    const inner = {x, y, width, height}\n    const data: { type: ImgType | undefined, angle: number }[][] = Matrixs.create(full.w, full.h, (x, y) => {\n      const type: ImgType | undefined = !isInside(inner, [x, y]) ? \"sand\" : undefined\n      return {type, angle: 0}\n    })\n    const rect = {\n      x: inner.x - 1,\n      y: inner.y - 1,\n      width: inner.width + 2,\n      height: inner.height + 2\n    }\n    const coastline = this.generateCoastline(rect)\n    coastline.forEach(x => {\n      Matrixs.set(data, x.pos, {type: x.type, angle: x.angle})\n    })\n    return tuple(inner, data)\n  }\n\n  onInit(): void {\n    this.onOrientationChange(() => {\n      this.generateContent()\n      if(this.seaGroup.visible && this.ships.length > 0){\n        this.createShips()\n      }\n      this.updateButtons()\n    })\n  }\n\n}\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/games/ships/components/seaComponent.ts","import {ImageKey} from \"core/types/assets\"\nimport {ms} from \"core/types/common\"\nimport {Signals} from \"core/ui/animations/signals\"\nimport {Img} from \"core/ui/controls/img\"\n\nexport module SpriteAnimation {\n  export function play(img: Img, sprites: ImageKey[], delay: ms, loop = false, startFrame = 0): Phaser.Signal {\n    let index = startFrame\n    let signal = new Phaser.Signal()\n    img.key = sprites[index]\n    const interval = img.interval(() => {\n      index += 1\n      if(index >= sprites.length){\n        index = 0\n        if(!loop){\n          clearInterval(interval)\n          signal.dispatch()\n        }\n      }\n      img.key = sprites[index]\n    }, delay)\n    return signal\n\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/core/ui/animations/spriteAnimation.ts","import {createLevelsFromArray} from \"core/types/logic\"\n\nexport const maxShipCount = 7\n\nexport interface Level {\n  width: number,\n  height: number,\n  withBlocks: boolean,\n  withFlows: boolean,\n  shipCount: number,\n  instructionLength: number\n}\n\nfunction level(width: number, height: number, shipCount: number,\n  instructionLength: number, withBlocks = false, withFlows = false): Level {\n  return {width, height, shipCount, instructionLength, withBlocks, withFlows}\n}\n\nexport const levelsArray = [\n  level(3, 2, 1, 1),\n  level(3, 3, 2, 1),\n  level(3, 3, 2, 2, true, false),\n  level(3, 3, 2, 2, false, true),\n  level(4, 3, 2, 3),\n  level(4, 3, 2, 3, true),\n  level(4, 3, 2, 3, false, true),\n  level(4, 3, 2, 3, true, true),\n  level(4, 3, 3, 1),\n  level(4, 4, 3, 3),\n  level(4, 4, 3, 3, true, true),\n  level(5, 4, 4, 5),\n  level(5, 4, 4, 3, true, true),\n  level(6, 4, 5, 5),\n  level(6, 4, 5, 3, true, true),\n  level(6, 4, 6, 5),\n  level(6, 4, 6, 3, true, true),\n  level(6, 4, maxShipCount, 5),\n  level(6, 4, maxShipCount, 3, true, true),\n  level(6, 4, maxShipCount, 5, true, true),\n]\nexport const levels = createLevelsFromArray(levelsArray)\n\n\n\n// WEBPACK FOOTER //\n// ./src/games/ships/levels.ts","import {GameLogic} from \"core/logic\"\nimport {Arrays, RandomGenerator} from \"core/utils\"\nimport {UniqSeq} from \"core/utils/circleSeq\"\nimport {Matrixs} from \"core/utils/matrixs\"\nimport {Numbers} from \"core/utils/numbers\"\nimport {tuple} from \"core/utils/tuples\"\nimport * as _ from 'lodash'\nimport {Level} from \"./levels\"\nimport MatrixDirection = Matrixs.MatrixDirection\n\ntype Position = [number, number]\n\ntype Flow = [Position, MatrixDirection]\n\nexport type Task = {\n  sea: {\n    width: number,\n    height: number,\n    blocks: Position[],\n    flows: Flow[],\n  },\n  shipIndex: number,\n  instruction: MatrixDirection[],\n  positions: { begin: Position[], end: Position[] },\n  answers: Position[]\n}\n\nexport class Logic extends GameLogic<Task, Level> {\n  rng = new RandomGenerator()\n  uniqPosSeq = [new UniqSeq(0), new UniqSeq(0)]\n\n  move(p: Position, dirs: MatrixDirection[], blocks: Position[], flows: Flow[]): Position {\n    return dirs.reduce(([x, y], v) => {\n      const {x: dx, y: dy} = Matrixs.directions[v]\n      const newPosition = tuple(x + dx, y + dy)\n      if (Arrays.includesWith(blocks, newPosition)) {\n        return tuple(x, y)\n      }\n      const flow = flows.find(x => _.isEqual(x[0], newPosition))\n      if (flow) {\n        return this.move(newPosition, [flow[1]], blocks, flows)\n      }\n      return newPosition\n    }, p)\n  }\n\n\n  getAllAvailableDirections(position: Position, level: Level,\n    restrictPositions: Position[], blocks: Position[], flows: Flow[]){\n    return Matrixs.matrixDirectionList.filter(dir => {\n      const newPosition = this.move(position, [dir], blocks, flows)\n      return Matrixs.isInside(newPosition, level)\n        && !Arrays.includesWith(restrictPositions, newPosition)\n    })\n  }\n\n  generateInstruction(level: Level, position: Position, otherShips: Position[],\n    blocks: Position[], flows: Flow[]): [MatrixDirection[], Position] {\n\n    const restrictPositions = blocks.concat(flows.map(x => x[0]), otherShips)\n    return _.range(level.instructionLength).reduce(([dirs, p]) => {\n      const allAvailable = this.getAllAvailableDirections(p, level,\n        restrictPositions, blocks, flows)\n      if (allAvailable.length != 0) {\n        const lastDir = _.last(dirs)\n        const available = !lastDir || allAvailable.length == 1\n          ? allAvailable\n          : allAvailable.filter(x => x != Matrixs.oppositeDirections[lastDir])\n        const dir = this.rng.sample(available)\n        dirs.push(dir)\n        return tuple(dirs, this.move(p, [dir], blocks, flows))\n      } else {\n        return tuple(dirs, p)\n      }\n    }, tuple([] as MatrixDirection[], position))\n  }\n\n  generateBlocksAndFlows(level: Level) {\n    // const count = (withItem: boolean, withSecond: boolean) =>\n    //   !withItem ? 0 : (level.width == 3 || (level.width == 4 && withSecond) ? 1 : 2)\n\n    const positions = Arrays.uniqWith(Arrays.cartesianProduct(\n      [1, level.width - 2], [1, level.height - 2]))\n    const count = level.withBlocks && level.withFlows\n      ? Numbers.count(positions.length, 2)\n      : positions.length\n    const [firstPositions, secondPositions] = this.rng.split(positions, count)\n    const [blocks, flowPositions] = level.withBlocks\n      ? tuple(firstPositions, secondPositions)\n      : tuple([], firstPositions)\n    const getFlowDirections = (p: Position) => Matrixs.matrixDirectionList.filter(dir => {\n      const nextPosition = Matrixs.move(p, [dir])\n      return !Arrays.includesWith(positions, nextPosition)\n    })\n    const flows = level.withFlows ? flowPositions\n      .map(x => tuple(x, this.rng.sample(getFlowDirections(x)))) : []\n    return tuple(blocks, flows)\n  }\n\n  generateBeginPositions(level: Level) {\n    const [blocks, flows] = this.generateBlocksAndFlows(level)\n    const restrictPositions = blocks.concat(flows.map(x => x[0]))\n    this.uniqPosSeq.forEach(x => x.reset())\n    const nextPosition = (): Position => {\n      const p = tuple(this.uniqPosSeq[0].next(level.width), this.uniqPosSeq[1].next(level.height))\n      if (Arrays.includesWith(restrictPositions, p)\n        || this.getAllAvailableDirections(p, level, restrictPositions, blocks, flows).length == 0) {\n        return nextPosition()\n      }\n      restrictPositions.push(p)\n      return p\n    }\n    return tuple(_.range(level.shipCount).map(i => nextPosition()), blocks, flows)\n  }\n\n  nextTask(level: Level) {\n    const prevTask = this.getPrevTask()\n    const usePrevTask = prevTask && !this.isNewLevel\n    const {width, height} = level\n    const [[positionBeginList, blocks, flows], shipIndex] = prevTask && usePrevTask\n      ? tuple(tuple(prevTask.positions.end, prevTask.sea.blocks, prevTask.sea.flows), (prevTask.shipIndex + 1) % level.shipCount)\n      : tuple(this.generateBeginPositions(level), 0)\n    const positionEndList = prevTask && usePrevTask ? prevTask.positions.end : positionBeginList\n    const [[positionBegin], otherPositions] =\n      Arrays.partition(positionEndList, (x, i) => {\n        return i == shipIndex\n      })\n    const [instruction, positionEnd] = this.generateInstruction(level, positionBegin, otherPositions, blocks, flows)\n    const positions = {\n      begin: positionBeginList,\n      end: Arrays.updateAt(positionEndList, shipIndex, () => positionEnd)\n    }\n    const answers = [positionEnd]\n    return {\n      sea: {\n        width,\n        height,\n        flows,\n        blocks\n      },\n      shipIndex,\n      instruction,\n      positions,\n      answers\n    }\n  }\n\n}\n\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/games/ships/logic.ts"],"sourceRoot":""}